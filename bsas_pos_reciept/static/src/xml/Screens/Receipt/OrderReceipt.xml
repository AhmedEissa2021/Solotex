<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-set="discount" t-value="0"/>


    <t t-name="custom_order_receipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1" class="float-right"  dir="rtl">

<!--        t-if=""-->
        <xpath expr="//t[contains(@t-if,'receipt.company.contact_address')]" position="replace">

<!--            <t t-esc=""/>-->
<!--                <t t-if="env.pos.config.name">-->
<!--                    <div><t t-esc="env.pos.config.name" /></div>-->
<!--                </t>-->
<!--<t t-if="receipt.cashier">-->
        </xpath>
        <xpath expr="//t[contains(@t-if,'receipt.company.vat')]" position="replace">
            <div>البطاقة الضريبية:<t t-esc="receipt.company.vat" /></div>

        </xpath>

        <xpath expr="//t[contains(@t-if,'receipt.cashier')]" position="replace">
                                <div>--------------------------------</div>


<!--<t t-if="receipt.cashier">-->
        </xpath>

        <xpath expr="//div[hasclass('orderlines')]" position="replace">
            <t t-set="discount" t-value="0"/>

            <table class='receipt-orderlines'>
                    <colgroup>
                        <col width='25%'/>
                        <col width='20%'/>
                        <col width='15%'/>
                        <col width='40%'/>

                    </colgroup>
                    <tr class="receipt-line">




                        <td style="text-align: center;border: 1px solid #8e0000; ">
                            م
                        </td>
                        <td style="text-align: center;border: 1px solid #8e0000; ">
                            المنتج
                        </td>
                        <td style="text-align: center;border: 1px solid #8e0000; ">
                            الكمية
                        </td>
                        <td style="text-align: center;border: 1px solid #8e0000; ">
                            السعر
                        </td>
                        <td style="text-align: center;border: 1px solid #8e0000; ">
                            الاجمالي
                        </td>
                    </tr>
                    <t t-set="noOfLine" t-value="1"/>


                     <tr t-foreach='orderlines' t-as='line' t-key="line.id" class="receipt-line">
                         <t t-if="line.product.display_name != 'Discount'">
                            <td style="text-align: center">
                                <t t-esc="noOfLine"/>
                            </td>
                            <td style="text-align: center;border: 1px solid #8e0000; ">

    <!--                             <ProductName product="line.product"/>-->
                                <t t-esc="line.product.display_name"/>
<!--                                 <t t-if="line.get_unit()['name'] !== 'Units'"> -->

                            </td>
                            <td style="text-align: center;border: 1px solid #8e0000; ">
                                <t t-esc="env.pos.format_currency_no_symbol(line.quantity)"/>
<!--                                     <span> </span>
                                    <t t-esc="line.get_unit()['name']"/>
                                </t> -->
                            </td>
                            <td style="text-align: center;border: 1px solid #8e0000; ">
                                <t t-esc="env.pos.format_currency_no_symbol(line.price)"/>
                            </td>
                            <td style="text-align: center;border: 1px solid #8e0000; ">
                                <t t-esc="env.pos.format_currency_no_symbol(line.price*line.quantity)"/>
                            </td>
                         </t>
                         <t t-else="">
                           <t t-set="discount" t-value="line.price*line.quantity"/>
<!--                           <td><t t-esc="discount"/></td>-->


                         </t>

                        <t t-set="noOfLine" t-value="noOfLine + 1"/>
                    </tr>

<!--                    </t>-->
                </table>
            <br/>

        </xpath>
        <xpath expr="//t[contains(@t-if, '!isTaxIncluded')]" position="replace">
<!--            <br/>-->
<!--            <div class="pos-receipt-center-align"></div>-->
<!--                <br/>-->
<!--                <div><span t-esc="env.pos.format_currency(receipt.subtotal)" class="pos-receipt-left-align"/>الاجمالي</div>-->
<!--                <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">-->
<!--                    <div class="responsive-price">-->
<!--                        <t t-esc="tax.name" />-->
<!--                        <span t-esc='env.pos.format_currency_no_symbol(tax.amount)' class="pos-receipt-right-align"/>-->
<!--                    </div>-->
<!--                </t>-->
          <table class="pos-receipt-left-align">
                <colgroup>
                    <col width='55%'/>
                    <col width='45%'/>
                </colgroup>
                <tr class="receipt-line">
<!--                    <td style="text-align: left">-->
<!--                        total-->
<!--                    </td>-->
<!--                    <td style="text-align: center">-->
<!--                        <t t-esc="env.pos.format_currency(receipt.total_with_tax -receipt.total_tax)"/>-->
<!--                    </td>-->
                    <td style="text-align: left">
                         الإجمالي الفرعي
                    </td>
                    <td style="text-align: center">
                        <t t-esc="env.pos.format_currency(receipt.subtotal+receipt.total_discount - discount-receipt.total_tax)"/>
<!--                        <t t-esc="discount"/>-->
                    </td>

<!--                <div>Subtotal<span t-esc="env.pos.format_currency(receipt.subtotal-receipt.total_tax)" class="pos-receipt-right-align"/></div>-->

                </tr>
                <tr class="receipt-line">
                    <td style="text-align: left">
                        الخصم
                    </td>
                    <td style="text-align: center">
                        <t t-esc="env.pos.format_currency(-receipt.total_discount+discount)"/>
                    </td>

                </tr>

                <tr class="receipt-line">
                    <td style="text-align: left">
                        اجمالي الضرائب (14%)
                    </td>
                    <td style="text-align: center">
                        <t t-esc="env.pos.format_currency(receipt.total_tax )"/>
                    </td>

                </tr>
                <tr class="receipt-line">
<!--                    <td style="text-align: left">-->
<!--                        total-->
<!--                    </td>-->
<!--                    <td style="text-align: center">-->
<!--                        <t t-esc="env.pos.format_currency(receipt.total_with_tax -receipt.total_tax)"/>-->
<!--                    </td>-->
                    <td style="text-align: left">
                        الاجمالي
                    </td>
                    <td style="text-align: center">
                        <t t-esc="env.pos.format_currency(receipt.total_with_tax)"/>
                    </td>

<!--                <div>الاجمالي<span t-esc="env.pos.format_currency(receipt.subtotal-receipt.total_tax)" class="pos-receipt-right-align"/></div>-->

                </tr>
<!--                <tr class="receipt-line">-->
<!--                    <td  style="text-align: left">-->
<!--                        Total With Taxes-->
<!--                    </td>-->
<!--                    <td  style="text-align: center" >-->
<!--                        <t t-esc="env.pos.format_currency(receipt.total_with_tax )"/>-->
<!--                    </td>-->

<!--                </tr>-->
            </table>




        </xpath>
        <xpath expr="//t[contains(@t-if, 'isTaxIncluded')]" position="replace"></xpath>
        <xpath expr="//div[hasclass('pos-receipt-right-align')]" position="replace"></xpath>
        <xpath expr="//div[hasclass('pos-receipt-amount')]" position="replace"></xpath>
        <xpath expr="//t[contains(@t-foreach, 'paymentlines')]" position="replace">
            <table class='receipt-orderlines' style="margin-top:-50px" align="center" >
            <t t-foreach="receipt.paymentlines" t-as="line" t-key="line.cid">
                   <tr class="receipt-line" >

                    <td >
                        <span t-esc="line.name" style="text-align: right;margin-left:52px;"/>
                    </td>
                    <td style="align: left">

                        <span t-esc="env.pos.format_currency_no_symbol(line.amount)" />
                   </td>
                  </tr>
                </t>
            </table>
              <table class='receipt-orderlines' align="center" >
                <tr><img src="/bsas_pos_reciept/static/src/WhatsApp Image 2022-09-11 at 14.17.58.jpeg" width="120" height="100" alt=""/></tr>
            </table>
        </xpath>

        <xpath expr="//div[hasclass('receipt-change')]" position="replace"></xpath>
<!--        t-if="-->
        <xpath expr="//t[contains(@t-if, 'receipt.total_discount')]" position="replace"></xpath>

<!--        <xpath expr="//div[hasclass('receipt-change')]" position="replace"></xpath>-->
        <xpath expr="//div[hasclass('after-footer')]" position="replace"></xpath>
<!--         <xpath expr="//div[hasclass('pos-receipt-order-data')]" position="replace"></xpath> -->
        <div class="pos-receipt">
            <div class="pos-receipt-center-align"><span  >Powered by</span></div>

            <div  class="pos-receipt-center-align"><span >Business Solution For Advanced Systems</span></div>
            <div  class="pos-receipt-center-align"><span >www.bsas-eg.com</span></div>
            
        </div>

    </t>
</templates>
